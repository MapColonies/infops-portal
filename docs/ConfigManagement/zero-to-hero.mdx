---
title: Zero to Hero
---

# From Zero to Hero

Step by step guide on how to integrate the MapColoniesâ„¢ Config Management system into your service.

## Assumptions

This guide assumes that you have an already existing service based on the [MapColonies boilerplate repo](https://github.com/MapColonies/ts-server-boilerplate), and basic knowledge of JSON Schema. If needed you can read and learn about JSON Schema in the following link: https://json-schema.org/understanding-json-schema.

It is also recommended to read the [schemas package readme](https://github.com/MapColonies/schemas/blob/master/README.md).

## What is Config Management?

Config Management is the complete solution to manage all the configuration needs of MapColonies.
It's intended to support the system in all stages from early development to production.

Config management has the following parts:

- [schemas](https://github.com/MapColonies/schemas) - Contains the JSON Schemas that define all the configs
- [config-server](https://github.com/MapColonies/config-server) - Server for managing all the configurations
- [config](https://github.com/MapColonies/config) - NPM package for using config management with your NodeJS service
- [config-ui](https://github.com/MapColonies/config-ui) - UI for interacting with the config server

## Initialize the work environment

1. Clone the schemas repo into your own machine:

```bash
git clone git@github.com:MapColonies/schemas.git
```

2. Change the working directory and open the repository in your editor (vscode for this guide) necessary

```bash
cd schemas && code .
```

3. Create a file for your schema under the schemas folder.

   The directory hierarchy represents the ID of the schema. For example, a common schema that handles redis configuration might be under `schemas/common/redis/v1.schema.json` and its id will be `https://mapcolonies.com/common/redis/v1`.

   The file name is based on the order of the schema. If it's the first one, the name should be `v1.schema.json`, otherwise it should be the next number in order.

## Creating the schema

1. Start by filling all the metadata for your JSON Schema. The more metadata you fill, it will be easier to understand and use your schema.

```json title="schemas/my-domain/my-schema/v1.schema.json"
{
  "$id": "https://mapcolonies.com/my-domain/my-schema/v1",
  "type": "object",
  "title": "myDomainMySchemaV1",
  "description": "My domain's schema"
}
```

2. Create your schema content. Use the official JSON Schema docs, the following guide and use other schemas in the repo as reference.

```json title="schemas/my-domain/my-schema/v1.schema.json"
{
  "$id": "https://mapcolonies.com/my-domain/my-schema/v1",
  "type": "object",
  "title": "myDomainMySchemaV1",
  "description": "My domain's schema",
  "properties": {
    "id": {
      "type": "string",
      "description": "The unique identifier for the entity"
    },
    "name": {
      "type": "string",
      "description": "The name of the entity"
    },
    "age": {
      "type": "integer",
      "description": "The age of the entity",
      "x-env-value": "ENTITY_AGE"
    },
    "isAlive": {
      "type": "boolean",
      "description": "Is the entity alive",
      "x-env-value": "ENTITY_IS_ALIVE"
    }
  }
}
```

:::tip

You can use `x-env-value` to enable overriding the value of a field using environment variable.
For more information check out the relevant docs in [config](https://github.com/MapColonies/config?tab=readme-ov-file#environment-variables) and [schemas](https://github.com/MapColonies/schemas?tab=readme-ov-file#custom-schema-properties).

:::

## Run validations

We want to make sure that the schema are valid, therefore we need to check the schema for errors.
To do so we can run the following command and make changes based on the feedback.

```bash
npm run validate
```

:::info

To see all the validations check the following doc: https://github.com/MapColonies/schemas?tab=readme-ov-file#validations

:::

## Validating the types

The types that the schemas package exports are automatically generated from the json schema. We want to make sure that the types are correct before we move forward. This way we can check the types and if anything is wrong go back and fix the schema.

1. Build the package:

```bash
npm run build
```

2. Check that the types are as you expected. They can be found under the `build` directory under the same hierarchy as the schema.
   For example, those are the types generated for the schema we created above:

```typescript title="build/schemas/my-domain/my-schema/v1.schema.d.ts"
import { typeSymbol } from '../../symbol.js';
declare const exported: {
    readonly [typeSymbol]: {
        [x: string]: unknown;
        id?: string | undefined;
        name?: string | undefined;
        age?: number | undefined;
        isAlive?: boolean | undefined;
    };
...
```
